---
import LayoutDefault from '~/layouts/LayoutDefault.astro'
import PhotoGrid from '~/components/PhotoGrid.astro'
import { getCollection } from 'astro:content'

// 获取所有照片
const allPhotos = await getCollection('photos')

// 按日期排序（最新的在前）
const sortedPhotos = allPhotos.sort((a, b) =>
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
)

const title = "Gallery"
const description = "A collection of my photography work"
---

<LayoutDefault title={title} desc={description}>
  <div class="gallery-page">
    <PhotoGrid
      photos={sortedPhotos}
    />
  </div>
</LayoutDefault>

<style>
  .gallery-page {
    @apply min-h-screen;
  }

  /* 添加淡入动画 */
  .gallery-page {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
